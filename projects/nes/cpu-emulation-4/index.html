<!doctype html><html lang=ko dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="ko"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>NES CPU(6502) 에뮬레이션 - 4 &#183; Oops Hardware</title><meta name=title content="NES CPU(6502) 에뮬레이션 - 4 &#183; Oops Hardware"><meta name=description content="Life, Hobby and Dev"><meta name=keywords content="project,development,software,"><link rel=canonical href=https://opensourcehardware.io/projects/nes/cpu-emulation-4/><link type=text/css rel=stylesheet href=/css/main.bundle.min.cf3c74f51650ce7f9276ebdfbf5527b2c7fac058c9d17c03df57719747818f715102c51234dbe02f2652761a1cc2be0594053d27880f0fddc996d981fd2bd6f0.css integrity="sha512-zzx09RZQzn+Sduvfv1Unssf6wFjJ0XwD31dxl0eBj3FRAsUSNNvgLyZSdhocwr4FlAU9J4gPD93JltmB/SvW8A=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.98bb8ce8f123e03c4d2171eeec151dd404b5c476beb5ef1068d0e8b1a2afb923065e6552fc14b2d867c85ee4bd8529a43193f729f874d3908517ba03b5d1cc57.js integrity="sha512-mLuM6PEj4DxNIXHu7BUd1AS1xHa+te8QaNDosaKvuSMGXmVS/BSy2GfIXuS9hSmkMZP3Kfh005CFF7oDtdHMVw==" data-copy=복사 data-copied=복사되었습니다></script><script src=/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7+kfJ6kKCJxQGC+8wm+Bz9JucDjDTGNew=="></script><link rel=icon type=image/png sizes=32x32 href=/favicon.png><meta property="og:url" content="https://opensourcehardware.io/projects/nes/cpu-emulation-4/"><meta property="og:site_name" content="Oops Hardware"><meta property="og:title" content="NES CPU(6502) 에뮬레이션 - 4"><meta property="og:description" content="테스트 롬파일 # CPU 에뮬레이션이 어느정도 완료가 되었으면 실제 코드를 구동 시켜서 정상적으로 동작 하는지 검증이 필요합니다. 검증을 위해서 6502에 맞게 컴파일된 바이너리가 필요한데 NES ROM 파일에는 당연히 게임 실행을 위한 바이너리 코드가 포함되어 있으므로 이를 활용하면 됩니다."><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="projects"><meta property="article:published_time" content="2022-03-07T13:10:06+09:00"><meta property="article:modified_time" content="2025-08-07T02:27:40+09:00"><meta property="article:tag" content="Project"><meta property="article:tag" content="Development"><meta property="article:tag" content="Software"><meta property="og:image" content="https://opensourcehardware.io/projects/nes/cpu-emulation-4/featured_cpu_test.png"><meta property="og:see_also" content="https://opensourcehardware.io/projects/nes/cpu-emulation-3/"><meta property="og:see_also" content="https://opensourcehardware.io/projects/nes/cpu-emulation-2/"><meta property="og:see_also" content="https://opensourcehardware.io/projects/nes/cpu-emulation-1/"><meta property="og:see_also" content="https://opensourcehardware.io/projects/nes/nesdoc-cpu/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://opensourcehardware.io/projects/nes/cpu-emulation-4/featured_cpu_test.png"><meta name=twitter:title content="NES CPU(6502) 에뮬레이션 - 4"><meta name=twitter:description content="테스트 롬파일 # CPU 에뮬레이션이 어느정도 완료가 되었으면 실제 코드를 구동 시켜서 정상적으로 동작 하는지 검증이 필요합니다. 검증을 위해서 6502에 맞게 컴파일된 바이너리가 필요한데 NES ROM 파일에는 당연히 게임 실행을 위한 바이너리 코드가 포함되어 있으므로 이를 활용하면 됩니다."><meta name=twitter:image content="https://opensourcehardware.io/projects/nes/cpu-emulation-4/featured_cpu_test.png"><meta property="og:image" content="https://opensourcehardware.io/projects/nes/cpu-emulation-4/featured_cpu_test.png"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"프로젝트","name":"NES CPU(6502) 에뮬레이션 - 4","headline":"NES CPU(6502) 에뮬레이션 - 4","abstract":"\u003c!-- \u002b\u002b\u002b\nauthor = \u0022Yogo\u0022\ntitle = \u0022NES CPU(6502) 에뮬레이션 - 4 (마무리)\u0022\ndate = 2022-03-07T13:10:06\u002b09:00\ndraft = false\n# categories = [\u0022Projects\u0022]\nseries = [\u0022NES Emulator\u0022]\ntags = [\u0022프로젝트\u0022, \u0022NES\u0022, \u0022Emulator\u0022]\n# type = \u0022post\u0022\n\u002b\u002b\u002b --\u003e\n\n\u003ch2 class=\u0022relative group\u0022\u003e테스트 롬파일 \n    \u003cdiv id=\u0022테스트-롬파일\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none\u0022\u003e\n        \u003ca class=\u0022group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline\u0022 href=\u0022#%ed%85%8c%ec%8a%a4%ed%8a%b8-%eb%a1%ac%ed%8c%8c%ec%9d%bc\u0022 aria-label=\u0022앵커\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e        \n    \n\u003c\/h2\u003e\n\u003cp\u003eCPU 에뮬레이션이 어느정도 완료가 되었으면 실제 코드를 구동 시켜서 정상적으로 동작 하는지 검증이 필요합니다. 검증을 위해서 6502에 맞게 컴파일된 바이너리가 필요한데 NES ROM 파일에는 당연히 게임 실행을 위한 바이너리 코드가 포함되어 있으므로 이를 활용하면 됩니다.\u003c\/p\u003e","inLanguage":"ko","url":"https:\/\/opensourcehardware.io\/projects\/nes\/cpu-emulation-4\/","author":{"@type":"Person","name":"Yogo"},"copyrightYear":"2022","dateCreated":"2022-03-07T13:10:06\u002b09:00","datePublished":"2022-03-07T13:10:06\u002b09:00","dateModified":"2025-08-07T02:27:40\u002b09:00","keywords":["project","development","software"],"mainEntityOfPage":"true","wordCount":"3295"}]</script><meta name=author content="Yogo"><link href=https://github.com/micro-artwork rel=me><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-G83TEBX87R"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G83TEBX87R")</script><script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js></script><script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js></script><script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js></script><script>const firebaseConfig={apiKey:"AIzaSyBVBSZRW7_Me50obAyy1nbuG0I4c4JTgws",authDomain:"AIzaSyBVBSZRW7_Me50obAyy1nbuG0I4c4JTgws",projectId:"oopshw-analytics",storageBucket:"oopshw-analytics.firebasestorage.app",messagingSenderId:"436193333437",appId:"1:436193333437:web:e4a226b3664c81157e67d4",measurementId:"G-FL95QG5VY5"};var app=firebase.initializeApp(firebaseConfig),db=firebase.firestore(),auth=firebase.auth()</script><script src=https://unpkg.com/@lottiefiles/lottie-player@2.0.11/dist/lottie-player.js></script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>
본문으로 건너뛰기</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px] z-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3 pt-[2px] pr-0 pb-[3px] pl-0"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Oops Hardware</a></nav><nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12"><a href=/archives class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>All</p></a><div><div class="cursor-pointer flex items-center nested-menu"><a href=/posts class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title><p>Blog</p></a><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/tags/life/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title=Life>Life</p></a><a href=/tags/devlog/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title=Devlog>Dev</p></a><a href=/tags/tech/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title=Tech>Tech</p></a></div></div></div></div><div><div class="cursor-pointer flex items-center nested-menu"><a href=/projects class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title><p>Projects</p></a><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/projects/bitnari/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title="빛나리(Bitnari) 프로젝트">Bitnari</p></a><a href=/projects/morse-keyboard/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title="모스(Morse) 부호 키보드 만들기">Morse Keyboard</p></a><a href=/projects/nes/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title="Nintendo Entertainment System">NES Emulation</p></a><a href=/projects/suface-dial/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title="서피스 다이얼 클론">Surface Dial Clone</p></a><a href=/projects/xi2ds/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title="XInput to DualShock 4 (XI2DS) 개발">XI2DS</p></a><a href=/projects/media-controller/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title="유튜브 미디어 컨트롤러">Youtube Media Controller</p></a></div></div></div></div><a href=/about class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>About</p></a><a href=https://github.com/micro-artwork target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><p class="text-base font-medium" title></p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title="검색하기 (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title="검색하기 (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button class="text-base hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-1 rtl:ml-1"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 md:hidden"><div id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/archives class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>All</p></a></li><li class=mt-1><a href=/posts class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Blog</p><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=/tags/life/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title=Life>Life</p></a></li><li class=mt-1><a href=/tags/devlog/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title=Devlog>Dev</p></a></li><li class=mt-1><a href=/tags/tech/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title=Tech>Tech</p></a></li><li class=mb-2></li><li class=mt-1><a href=/projects class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Projects</p><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=/projects/bitnari/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title="빛나리(Bitnari) 프로젝트">Bitnari</p></a></li><li class=mt-1><a href=/projects/morse-keyboard/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title="모스(Morse) 부호 키보드 만들기">Morse Keyboard</p></a></li><li class=mt-1><a href=/projects/nes/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title="Nintendo Entertainment System">NES Emulation</p></a></li><li class=mt-1><a href=/projects/suface-dial/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title="서피스 다이얼 클론">Surface Dial Clone</p></a></li><li class=mt-1><a href=/projects/xi2ds/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title="XInput to DualShock 4 (XI2DS) 개발">XI2DS</p></a></li><li class=mt-1><a href=/projects/media-controller/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title="유튜브 미디어 컨트롤러">Youtube Media Controller</p></a></li><li class=mb-2></li><li class=mt-1><a href=/about class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>About</p></a></li><li class=mt-1><a href=https://github.com/micro-artwork target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></div><p class="text-bg font-bg" title></p></a></li></ul></div></div></div></div></div></div><script type=text/javascript src=/js/background-blur.min.0ad33cb9c066f652728b2cc09c9ceaf32645544f48e8b6b38f120d86f433ed997da275a49e6151fe0176430c45376812708d84727f3f969101fb44a4345b3f34.js integrity="sha512-CtM8ucBm9lJyiyzAnJzq8yZFVE9I6LazjxINhvQz7Zl9onWknmFR/gF2QwxFN2gScI2Ecn8/lpEB+0SkNFs/NA==" data-target-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"><img id=background-image src=/projects/nes/cpu-emulation-4/featured_cpu_test.png alt="Background Image" class="absolute inset-0 w-full h-full object-cover"><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script type=text/javascript src=/js/background-blur.min.0ad33cb9c066f652728b2cc09c9ceaf32645544f48e8b6b38f120d86f433ed997da275a49e6151fe0176430c45376812708d84727f3f969101fb44a4345b3f34.js integrity="sha512-CtM8ucBm9lJyiyzAnJzq8yZFVE9I6LazjxINhvQz7Zl9onWknmFR/gF2QwxFN2gScI2Ecn8/lpEB+0SkNFs/NA==" data-target-id=background-blur data-image-id=background-image data-image-url=/projects/nes/cpu-emulation-4/featured_cpu_test.png></script><header id=single_header class=mt-5><ol class="text-sm text-neutral-500 dark:text-neutral-400 pb-3 print:hidden"><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/></a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/projects/>프로젝트</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/projects/nes/>Nintendo Entertainment System</a><span class="px-1 text-primary-500">/</span></li><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/projects/nes/cpu-emulation-4/>NES CPU(6502) 에뮬레이션 - 4</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">NES CPU(6502) 에뮬레이션 - 4</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2022-03-07T13:10:06+09:00>2022-03-07</time><span class="px-2 text-primary-500">&#183;</span><span title="읽는 시간">7 분</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=views_projects/nes/emul/cpu/4/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=views>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentColor" d="M288 32c-80.8.0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7.0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7.0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64-11.5.0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4.0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8.0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span>
</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=likes_projects/nes/emul/cpu/4/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=likes>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span>
</span><span class="px-2 text-primary-500">&#183;</span><span>
<button id=button_likes class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
<span id=button_likes_heart class="inline-block align-text-bottom hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span>
</span><span id=button_likes_emtpty_heart class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M244 84l11.1 12 12-11.98C300.6 51.37 347 36.51 392.6 44.1 461.5 55.58 512 115.2 512 185.1V190.9c0 41.5-17.2 81.2-47.6 109.5L283.7 469.1c-7.5 7-17.4 10.9-27.7 10.9S235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1.0 232.4.0 190.9V185.1c0-69.9 50.52-129.52 119.4-141 44.7-7.59 92 7.27 124.6 39.9C243.1 84 244 84.01 244 84zm11.1 79.9-45-46.8c-21.7-20.82-52.5-30.7-82.8-25.66C81.55 99.07 48 138.7 48 185.1V190.9c0 28.2 11.71 55.2 32.34 74.4L256 429.3l175.7-164c20.6-19.2 32.3-46.2 32.3-74.4V185.1c0-46.4-33.6-86.03-79.3-93.66C354.4 86.4 323.6 96.28 301.9 117.1l-46.8 46.8z"/></svg></span></span>
<span id=button_likes_text>&nbsp;Like</span></button></span></div><div class="flex flex-row flex-wrap items-center"></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] mr-2" href=/tags/project/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Project
</span></span></a><a class="relative mt-[0.5rem] mr-2" href=/tags/development/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Development
</span></span></a><a class="relative mt-[0.5rem] mr-2" href=/tags/software/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Software</span></span></a></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">목차</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#테스트-롬파일>테스트 롬파일</a></li><li><a href=#ines-롬-구조ines-rom-structure>iNES 롬 구조(iNES ROM Structure)</a><ul><li><a href=#헤더-포맷-header-format>헤더 포맷 (Header Format)</a></li><li><a href=#파일-읽기>파일 읽기</a></li></ul></li><li><a href=#테스트>테스트</a><ul><li><a href=#로그-출력>로그 출력</a></li><li><a href=#유의-및-고려사항>유의 및 고려사항</a></li></ul></li><li><a href=#마무리-및-계획>마무리 및 계획</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">목차</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#테스트-롬파일>테스트 롬파일</a></li><li><a href=#ines-롬-구조ines-rom-structure>iNES 롬 구조(iNES ROM Structure)</a><ul><li><a href=#헤더-포맷-header-format>헤더 포맷 (Header Format)</a></li><li><a href=#파일-읽기>파일 읽기</a></li></ul></li><li><a href=#테스트>테스트</a><ul><li><a href=#로그-출력>로그 출력</a></li><li><a href=#유의-및-고려사항>유의 및 고려사항</a></li></ul></li><li><a href=#마무리-및-계획>마무리 및 계획</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-fit"><details class="mt-2 mb-5 overflow-hidden rounded-lg ltr:ml-0 ltr:pl-5 rtl:mr-0 rtl:pr-5"><summary class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-primary-800 dark:text-neutral-100">NES Emulation -
이 글은 시리즈의 일부입니다.</summary><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">부분 :
이 글</div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=/projects/nes/cpu-emulation-3/>부분 :
NES CPU(6502) 에뮬레이션 - 3</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=/projects/nes/cpu-emulation-2/>부분 :
NES CPU(6502) 에뮬레이션 - 2</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=/projects/nes/cpu-emulation-1/>부분 :
NES CPU(6502) 에뮬레이션 - 1</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=/projects/nes/nesdoc-cpu/>부분 :
Nintendo Entertainment System - CPU</a></div></details><div class="article-content mb-20 max-w-3xl"><h2 class="relative group">테스트 롬파일<div id=테스트-롬파일 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#%ed%85%8c%ec%8a%a4%ed%8a%b8-%eb%a1%ac%ed%8c%8c%ec%9d%bc aria-label=앵커>#</a></span></h2><p>CPU 에뮬레이션이 어느정도 완료가 되었으면 실제 코드를 구동 시켜서 정상적으로 동작 하는지 검증이 필요합니다. 검증을 위해서 6502에 맞게 컴파일된 바이너리가 필요한데 NES ROM 파일에는 당연히 게임 실행을 위한 바이너리 코드가 포함되어 있으므로 이를 활용하면 됩니다.</p><p>하지만 단순히 ROM 파일이 있어도 연산이 정상 동작을 하는지 여부를 알기는 어렵습니다. 연산을 수행한 결과와 레지스터 변화를 예측할 수가 없고, 구현된 명령어가 모두 활용되는 지 알 수 없기 때문입니다.</p><p>다행히도 Emulator tests<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>나 Collection of test ROMs for testing a NES emulator<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> 페이지를 참고하면 에뮬레이션 테스트만을 위한 ROM 파일이 공유가 되고 있는 것을 알수 있습니다.</p><p>여기서는 NES CPU 에뮬레이션 쪽에서는 골드 스탠다드?로 불리우는 The Ultimate NES CPU test ROM<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>을 이용하여 테스트를 진행하였습니다. 이 ROM 파일은 연산 과정에 따른 레지스터 변화에 대한 로그(log)가 함께 공개되어 있으므로 해당 로그와 유사한 포맷으로 로그를 기록하면 상호 비교하여 구현이 잘 되었는지 확인 할 수 있습니다.</p><p>관련 파일이나 정보는 Emulator tests 페이지의 CPU Tests 테이블 밑에서 두번 째 항목의 링크를 참조하거나 아래 직접 링크를 통해 확인이 가능합니다.</p><p>파일: <a href=http://nickmass.com/images/nestest.nes target=_blank>http://nickmass.com/images/nestest.nes</a>
문서: <a href=https://www.qmtpro.com/~nes/misc/nestest.txt target=_blank>https://www.qmtpro.com/~nes/misc/nestest.txt</a>
로그: <a href=https://www.qmtpro.com/~nes/misc/nestest.log target=_blank>https://www.qmtpro.com/~nes/misc/nestest.log</a></p><h2 class="relative group">iNES 롬 구조(iNES ROM Structure)<div id=ines-롬-구조ines-rom-structure class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#ines-%eb%a1%ac-%ea%b5%ac%ec%a1%b0ines-rom-structure aria-label=앵커>#</a></span></h2><p>롬 파일은 카트리지의 메모리를 덤프 한 것 입니다. Raw 데이터만을 그대로 옮겨 놓은 것들도 있지만 게임 정보나 에뮬레이션에 필요한 정보들이 함께 포함되어 있는 형태도 있습니다.</p><p>그렇기 때문에 롬 파일도 하나의 포맷이 아니라 여러 포맷으로 공유가 되며 NES의 경우 보편적으로 초창기 NES 에뮬레이터를 개발한 <a href=http://fms.komkon.org target=_blank>Marat Fayzullin</a>의 iNES 포맷이 많이 사용되고 있습니다.</p><p>테스트 롬도 iNES 포맷으로 되어있으므로 짧막하게 관련 내용을 살펴보겠습니다.</p><h3 class="relative group">헤더 포맷 (Header Format)<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup><div id=헤더-포맷-header-format class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#%ed%97%a4%eb%8d%94-%ed%8f%ac%eb%a7%b7-header-format aria-label=앵커>#</a></span></h3><p>iNES는 버전에 따라 대략 3 ~ 4개의 섹션으로 이루어져 있습니다. 가장 첫 16바이트는 헤더 영역으로 PGR, CHR 영역 사이즈, Mapper 타입, RAM 크기 등 정보를 담고 있습니다.</p><p>offset을 고려하여 아래와 같이 코드로 표현 할 수 있습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>internal</span> <span class=kd>unsafe</span> <span class=k>struct</span> <span class=nc>INesHeader</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>fixed</span> <span class=kt>byte</span> <span class=n>magic</span><span class=p>[</span><span class=m>4</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>byte</span> <span class=n>numPRG</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>byte</span> <span class=n>numCHR</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>byte</span> <span class=n>control1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>byte</span> <span class=n>control2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>byte</span> <span class=n>numRAM</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>byte</span> <span class=n>flags9</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>byte</span> <span class=n>flags10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>fixed</span> <span class=kt>byte</span> <span class=n>reserved</span><span class=p>[</span><span class=m>5</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>magic은 &lsquo;NES&rsquo; 문자열을 담고 있는 매직 코드 입니다. NES 파일인지 여부를 확인하는 용도로 사용합니다.
numPGR은 16kB 단위 크기의 PGR 뱅크 갯수를 numCHR은 8kB 단위 크기의 CHR 뱅크 갯수를 의미합니다.</p><p>control1, control2는 데이터에 대한 부가정보를 담고 있습니다. 아래 NesDev 위키 사이트의 INES 페이지<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup> 설명을 일부 첨부 합니다.</p><pre tabindex=0><code>Control 1
76543210
||||||||
|||||||+- Mirroring: 0: horizontal (vertical arrangement) (CIRAM A10 = PPU A11)
|||||||              1: vertical (horizontal arrangement) (CIRAM A10 = PPU A10)
||||||+-- 1: Cartridge contains battery-backed PRG RAM ($6000-7FFF) or other persistent memory
|||||+--- 1: 512-byte trainer at $7000-$71FF (stored before PRG data)
||||+---- 1: Ignore mirroring control or above mirroring bit; instead provide four-screen VRAM
++++----- Lower nybble of mapper number

Control 2
76543210
||||||||
|||||||+- VS Unisystem
||||||+-- PlayChoice-10 (8KB of Hint Screen data stored after CHR data)
||||++--- If equal to 2, flags 8-15 are in NES 2.0 format
++++----- Upper nybble of mapper number
</code></pre><p>이외에 나머지 바이트는 거의 사용되지 않는 항목이거나 예비 영역입니다.</p><h3 class="relative group">파일 읽기<div id=파일-읽기 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#%ed%8c%8c%ec%9d%bc-%ec%9d%bd%ea%b8%b0 aria-label=앵커>#</a></span></h3><p>CPU 테스트를 위해서는 PGR 영역만 가져오면 되므로 매직 코드로 iNES 포맷인지 확인 후 PGR 뱅크 개수 * 16kB 만큼 데이터를 읽어서 배열에 저장하여 이 정보를 가지고 테스트를 합니다. 참고로 NES의 경우 오래된 콘솔이고 게임 롬 사이즈가 수 백 킬로바이트 정도 수준이므로 모든 정보를 변수에 저장해서 사용해도 크게 무리가 없습니다.</p><p>저장한 배열을 PC에 맞추어 순차대로 읽으면서 연산을 수행 할 것 입니다. 실제 게임 구동을 위해서라면 mirroring, mapper 정보에 대한 이해가 필요하지만 여기서는 CPU 테스트만 할 것이므로 신경쓰지 않아도 됩니다.</p><p>아래는 iNES 파일 구조를 읽어서 카트리지 인스턴스를 생성하여 반환하는 예제 입니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>class</span> <span class=nc>INes</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>unsafe</span> <span class=n>Cartridge</span> <span class=n>LoadFile</span><span class=p>(</span><span class=kt>string</span> <span class=n>path</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>FileStream</span> <span class=n>file</span> <span class=p>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>file</span> <span class=p>=</span> <span class=n>File</span><span class=p>.</span><span class=n>OpenRead</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=n>Exception</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>file</span> <span class=p>!=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>file</span><span class=p>.</span><span class=n>Close</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>BinaryReader</span> <span class=n>binary</span> <span class=p>=</span> <span class=k>new</span> <span class=n>BinaryReader</span><span class=p>(</span><span class=n>file</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>byte</span><span class=p>[]</span> <span class=n>headerBytes</span> <span class=p>=</span> <span class=n>binary</span><span class=p>.</span><span class=n>ReadBytes</span><span class=p>(</span><span class=m>16</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>INesHeader</span> <span class=n>header</span> <span class=p>=</span> <span class=n>Utils</span><span class=p>.</span><span class=n>BytesToStructure</span><span class=p>&lt;</span><span class=n>INesHeader</span><span class=p>&gt;(</span><span class=n>headerBytes</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// check file format</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>Convert</span><span class=p>.</span><span class=n>ToChar</span><span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>magic</span><span class=p>[</span><span class=m>0</span><span class=p>])</span> <span class=p>!=</span> <span class=sc>&#39;N&#39;</span> <span class=p>||</span>
</span></span><span class=line><span class=cl>            <span class=n>Convert</span><span class=p>.</span><span class=n>ToChar</span><span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>magic</span><span class=p>[</span><span class=m>1</span><span class=p>])</span> <span class=p>!=</span> <span class=sc>&#39;E&#39;</span> <span class=p>||</span>
</span></span><span class=line><span class=cl>            <span class=n>Convert</span><span class=p>.</span><span class=n>ToChar</span><span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>magic</span><span class=p>[</span><span class=m>2</span><span class=p>])</span> <span class=p>!=</span> <span class=sc>&#39;S&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>Exception</span><span class=p>(</span><span class=s>&#34;Not INES Format&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>bool</span> <span class=n>battery</span> <span class=p>=</span> <span class=p>((</span><span class=n>header</span><span class=p>.</span><span class=n>control1</span> <span class=p>&gt;&gt;</span> <span class=m>1</span><span class=p>)</span> <span class=p>&amp;</span> <span class=m>0x01</span><span class=p>)</span> <span class=p>!=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// mapper</span>
</span></span><span class=line><span class=cl>        <span class=kt>byte</span> <span class=n>mapper</span> <span class=p>=</span> <span class=p>(</span><span class=kt>byte</span><span class=p>)((</span><span class=n>header</span><span class=p>.</span><span class=n>control2</span> <span class=p>&amp;</span> <span class=m>0xF0</span><span class=p>)</span> <span class=p>|</span> <span class=p>((</span><span class=n>header</span><span class=p>.</span><span class=n>control1</span> <span class=p>&amp;</span> <span class=m>0xF0</span><span class=p>)</span> <span class=p>&gt;&gt;</span> <span class=m>4</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;Control1: {0:X2}, Control2: {1:X2}&#34;</span><span class=p>,</span> <span class=n>header</span><span class=p>.</span><span class=n>control1</span><span class=p>,</span> <span class=n>header</span><span class=p>.</span><span class=n>control2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// format version</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>version</span> <span class=p>=</span> <span class=p>((</span><span class=n>header</span><span class=p>.</span><span class=n>control2</span> <span class=p>&gt;&gt;</span> <span class=m>2</span><span class=p>)</span> <span class=p>&amp;</span> <span class=m>0x03</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>version</span> <span class=p>!=</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>Exception</span><span class=p>(</span><span class=s>&#34;Can not support INES 2.0 Format&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// screen mirroring</span>
</span></span><span class=line><span class=cl>        <span class=kt>bool</span> <span class=n>fourScreen</span> <span class=p>=</span> <span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>control1</span> <span class=p>&amp;</span> <span class=m>0x80</span><span class=p>)</span> <span class=p>!=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>bool</span> <span class=n>vertical</span> <span class=p>=</span> <span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>control1</span> <span class=p>&amp;</span> <span class=m>0x01</span><span class=p>)</span> <span class=p>!=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;four: {0}, vert: {1}&#34;</span><span class=p>,</span> <span class=n>fourScreen</span><span class=p>,</span> <span class=n>vertical</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>byte</span> <span class=n>mirroring</span> <span class=p>=</span> <span class=p>(</span><span class=kt>byte</span><span class=p>)(((</span><span class=n>header</span><span class=p>.</span><span class=n>control1</span> <span class=p>&gt;&gt;</span> <span class=m>2</span><span class=p>)</span> <span class=p>&amp;</span> <span class=m>0x02</span><span class=p>)</span> <span class=p>|</span> <span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>control1</span> <span class=p>&amp;</span> <span class=m>0x01</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// has trainer?</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(((</span><span class=n>header</span><span class=p>.</span><span class=n>control1</span> <span class=p>&gt;&gt;</span> <span class=m>2</span><span class=p>)</span> <span class=p>&amp;</span> <span class=m>0x1</span><span class=p>)</span> <span class=p>!=</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// unused</span>
</span></span><span class=line><span class=cl>            <span class=n>binary</span><span class=p>.</span><span class=n>ReadBytes</span><span class=p>(</span><span class=m>512</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>        <span class=c1>// read PRG-ROM</span>
</span></span><span class=line><span class=cl>        <span class=kt>byte</span><span class=p>[]</span> <span class=n>prg</span> <span class=p>=</span> <span class=n>binary</span><span class=p>.</span><span class=n>ReadBytes</span><span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>numPRG</span> <span class=p>*</span> <span class=m>0x4000</span><span class=p>);</span> <span class=c1>// 16384</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// read CHR-ROM</span>
</span></span><span class=line><span class=cl>        <span class=kt>byte</span><span class=p>[]</span> <span class=n>chr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>numCHR</span> <span class=p>==</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>chr</span> <span class=p>=</span> <span class=k>new</span> <span class=kt>byte</span><span class=p>[</span><span class=m>8192</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>chr</span> <span class=p>=</span> <span class=n>binary</span><span class=p>.</span><span class=n>ReadBytes</span><span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>numCHR</span> <span class=p>*</span> <span class=m>0x2000</span><span class=p>);</span> <span class=c1>// 8192</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;{0}{1}{2}, {3:X}, {4:X}, {5}, {6}, mirror: {7}&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=n>Convert</span><span class=p>.</span><span class=n>ToChar</span><span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>magic</span><span class=p>[</span><span class=m>0</span><span class=p>]),</span> 
</span></span><span class=line><span class=cl>            <span class=n>Convert</span><span class=p>.</span><span class=n>ToChar</span><span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>magic</span><span class=p>[</span><span class=m>1</span><span class=p>]),</span> 
</span></span><span class=line><span class=cl>            <span class=n>Convert</span><span class=p>.</span><span class=n>ToChar</span><span class=p>(</span><span class=n>header</span><span class=p>.</span><span class=n>magic</span><span class=p>[</span><span class=m>2</span><span class=p>]),</span> <span class=n>prg</span><span class=p>[</span><span class=m>0</span><span class=p>],</span> <span class=n>prg</span><span class=p>[</span><span class=m>16383</span><span class=p>],</span> <span class=n>mapper</span><span class=p>,</span> <span class=n>header</span><span class=p>.</span><span class=n>numPRG</span><span class=p>,</span> <span class=n>mirroring</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>binary</span><span class=p>.</span><span class=n>Close</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>file</span><span class=p>.</span><span class=n>Close</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Cartridge</span><span class=p>(</span><span class=n>prg</span><span class=p>,</span> <span class=n>chr</span><span class=p>,</span> <span class=n>mapper</span><span class=p>,</span> <span class=n>mirroring</span><span class=p>,</span> <span class=n>battery</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 class="relative group">테스트<div id=테스트 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#%ed%85%8c%ec%8a%a4%ed%8a%b8 aria-label=앵커>#</a></span></h2><p>CPU가 명령어 사이클(nstruction Cycles)을 수행 할 수 있고 롬파일에서 PGR 영역을 가져올 수 있으면 테스트 롬 파일을 읽어서 연산이 제대로 수행하는지 확인을 합니다.</p><h3 class="relative group">로그 출력<div id=로그-출력 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#%eb%a1%9c%ea%b7%b8-%ec%b6%9c%eb%a0%a5 aria-label=앵커>#</a></span></h3><p>실제 연산이 잘 이루어졌는지는 확인을 위해서 로그를 출력해야 합니다. 위에 테스트 롬의 로그 파일을 다운 받아서 어떤 포맷으로 출력 하는지 확인 하도록 합니다.</p><pre tabindex=0><code>C000  4C F5 C5  JMP $C5F5                       A:00 X:00 Y:00 P:24 SP:FD PPU:  0, 21 CYC:7
C5F5  A2 00     LDX #$00                        A:00 X:00 Y:00 P:24 SP:FD PPU:  0, 30 CYC:10
C5F7  86 00     STX $00 = 00                    A:00 X:00 Y:00 P:26 SP:FD PPU:  0, 36 CYC:12
C5F9  86 10     STX $10 = 00                    A:00 X:00 Y:00 P:26 SP:FD PPU:  0, 45 CYC:15
C5FB  86 11     STX $11 = 00                    A:00 X:00 Y:00 P:26 SP:FD PPU:  0, 54 CYC:18
C5FD  20 2D C7  JSR $C72D                       A:00 X:00 Y:00 P:26 SP:FD PPU:  0, 63 CYC:21
C72D  EA        NOP                             A:00 X:00 Y:00 P:26 SP:FB PPU:  0, 81 CYC:27
...
</code></pre><p>로그를 라인 단위로 확인하면 다음과 같은 순서대로 출력 된 것을 확인 할 수 있습니다.</p><ul><li>PC, Opcode, Operand, Instruction Addressing, A(ccumulator), X, Y, P(Status), SP(Stack Pointer), PPU cycles, CPU cycles(누적)</li></ul><p>해당 정보들을 Opcode를 실행 하는 과정에서 문자열로 만들어 출력 할 수 있도록 합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>private</span> <span class=kt>string</span> <span class=n>WriteLog</span><span class=p>(</span><span class=kt>byte</span> <span class=n>opcode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>String</span><span class=p>.</span><span class=n>Format</span><span class=p>(</span><span class=s>&#34;{0:X4}  {1:X2} {2} {3}\t{4} {5,-26} A:{6:X2} X:{7:X2}&#34;</span> <span class=p>+</span>  
</span></span><span class=line><span class=cl>                <span class=s>&#34;Y:{8:X2} P:{9:X2} SP:{10:X2} PPU:{11} CYC:{12}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>registers</span><span class=p>.</span><span class=n>PC</span><span class=p>,</span> <span class=n>opcode</span><span class=p>,</span> <span class=n>w1</span><span class=p>,</span> <span class=n>w2</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>addrssing</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>registers</span><span class=p>.</span><span class=n>ACC</span><span class=p>,</span> <span class=n>registers</span><span class=p>.</span><span class=n>X</span><span class=p>,</span> <span class=n>registers</span><span class=p>.</span><span class=n>Y</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>registers</span><span class=p>.</span><span class=n>SR</span><span class=p>.</span><span class=n>GetByte</span><span class=p>(),</span> <span class=n>registers</span><span class=p>.</span><span class=n>SP</span><span class=p>,</span> <span class=n>ppuCycles</span><span class=p>,</span> <span class=n>cpuCycles</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>실제 구현에서는 포맷이 완전하게 동일하지는 않고 어드레싱 포맷이 반영된 operand 주소는 단순화 시켜서 출력 하도록 했습니다. 대신 그 외 정보는 모두 동일하도록 하여 적어도 검증에 문제가 생기지 않도록 하였습니다.</p><p>아래 그림과 같이 텍스트 박스에 로그를 출력하고 출력이 완료되면 원본 로그와 차이가 있는지 비교를 하였습니다.</p><p><figure><img class="my-0 rounded-md" loading=lazy alt="CPU TEST" src=/projects/nes/cpu-emulation-4/featured_cpu_test.png></figure></p><p>아래는 로그의 처음 3줄과 마지막 3줄 예시 입니다.</p><pre tabindex=0><code>// 원본 로그
C000  4C F5 C5  JMP $C5F5                       A:00 X:00 Y:00 P:24 SP:FD PPU:  0, 21 CYC:7
C5F5  A2 00     LDX #$00                        A:00 X:00 Y:00 P:24 SP:FD PPU:  0, 30 CYC:10
C5F7  86 00     STX $00 = 00                    A:00 X:00 Y:00 P:26 SP:FD PPU:  0, 36 CYC:12
...
C69F  8D 07 40  STA $4007 = FF                  A:00 X:FF Y:15 P:27 SP:FB PPU:233,179 CYC:26544
C6A2  60        RTS                             A:00 X:FF Y:15 P:27 SP:FB PPU:233,191 CYC:26548
C66E  60        RTS                             A:00 X:FF Y:15 P:27 SP:FD PPU:233,209 CYC:26554


// 출력 로그
C000  4C F5 C5	JMP $C5F5                      A:00 X:00 Y:00 P:24 SP:FD PPU:  0, 21 CYC:7
C5F5  A2 00   	LDX $C5F6                      A:00 X:00 Y:00 P:24 SP:FD PPU:  0, 30 CYC:10
C5F7  86 00   	STX $00                        A:00 X:00 Y:00 P:26 SP:FD PPU:  0, 36 CYC:12
...
C69F  8D 07 40	STA $4007                      A:00 X:FF Y:15 P:27 SP:FB PPU:233,179 CYC:26544
C6A2  60      	RTS                            A:00 X:FF Y:15 P:27 SP:FB PPU:233,191 CYC:26548
C66E  60      	RTS                            A:00 X:FF Y:15 P:27 SP:FD PPU:233,209 CYC:26554
</code></pre><p>지금은 검증이 완료된 상태이므로 출력이 동일하게 이루어진 것을 확인 할 수 있습니다.</p><p>개발 중에는 당연히 실수나 또는 잘못된 구현으로 로그가 불일치가 발생하였고, 문제가 발생한 로그를 참조하여 해당 명령어나 어드레싱 모드의 문제를 수정하고 반복 테스트하는 과정을 거쳤습니다.</p><h3 class="relative group">유의 및 고려사항<div id=유의-및-고려사항 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#%ec%9c%a0%ec%9d%98-%eb%b0%8f-%ea%b3%a0%eb%a0%a4%ec%82%ac%ed%95%ad aria-label=앵커>#</a></span></h3><p>테스트 로그와 동일한 PC, Opcode, 각종 레지스터와 사이클이 모두 일치하는 것을 확인으로 CPU 에뮬레이션을 1차료 마무리 하였습니다.</p><p>로그 결과만 본다면 문제없이 구현된 것이 맞지만 확인이 필요한 사항이 있습니다.</p><p>먼저 원본 로그의 CPU 사이클이 처음부터 7으로 되어 있습니다. 로그에서 사이클은 연산 완료 후 사이클이 아니라 명령 실행 전 사이클 입니다. (연산 후 사이클이라고 하기에는 JMP 에서 소요하는 사이클과 일치하지 않습니다.)</p><p>6502에서는 인터럽트 발생 시 약 7사이클이 소요되는데, 초기 PC는 Reset Interrupt Vector($FFFC)에 있는 값으로 결정되기 때문에 Reset으로 인터럽트가 발생하여 PC를 새로 초기화 한 것을 기준으로한 것이 아닐까 하는 생각이 들었습니다.</p><p>일단은 테스트 시 CPU 사이클 초기 값을 7이라고 지정하여 테스트를 진행 하였습니다.</p><p>그리고 로그의 처음 PC는 C000으로 리셋 인터럽트 벡터의 값이 $C000 이어야 할 것 같은데, 테스트 롬파일을 확인해보면 실제로는 $C004가 기록되어 있었습니다. 해당 값의 불일치 원인이 명확하지 않아서 PC 값을 $C000로 기본 지정하여 테스트를 수행했습니다.</p><p>현재는 CPU 기능상의 테스트만 고려하였기 떄문에 임의로 수정을 하여 테스트를 완료 하였지만 차후 완성된 에뮬레이션을 위해서는 해당 부분에 대한 명확한 원인 파악과 동작 정의가 필요할 것으로 생각됩니다.</p><h2 class="relative group">마무리 및 계획<div id=마무리-및-계획 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100 select-none"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700 !no-underline" href=#%eb%a7%88%eb%ac%b4%eb%a6%ac-%eb%b0%8f-%ea%b3%84%ed%9a%8d aria-label=앵커>#</a></span></h2><p>어렵게나마 NES CPU 에뮬레이션이 부분적으로 완료되었습니다. 부분적이라고 한 것은 아직 다른 테스트 롬이나 실제 게임이 구동한 상태인지 추가 검증이 완료되지 않았기 때문입니다.</p><p>그래도 어느정도 가능성을 확인 하였기 때문에 일단 구현 된 것을 완성도를 높이기 위해서 리팩토링과 추가 검증을 수행하고 PPU 개발을 진행해야 합니다. PPU에 대해서는 사실 일부 스터디와 구현이 진행중이었으나 개념이 복잡하고 어려운 부분이 있어서 이해를 하고 진행하려다보니 현재는 중단상태입니다. 짧은 시간내에 바짝 하고 싶었지만 결과보다는 과정이 중요하니 느긋하게 진행 될 것 같습니다.</p><p>이 작업의 결과물도 공개를 하려고 하고 있는데 지금은 어렵고 PPU 완료한 이후 통합적으로 게임 구동이 가능한 상태 이후가 되지 않을까 합니다.</p><p>그럼 CPU 에뮬레이션 포스팅은 여기서 마무리하고 나중에 PPU 구현이 완료될 때 PPU 관련 포스트를 남기겠습니다.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://wiki.nesdev.org/w/index.php/Emulator_tests target=_blank>https://wiki.nesdev.org/w/index.php/Emulator_tests</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://github.com/christopherpow/nes-test-roms target=_blank>https://github.com/christopherpow/nes-test-roms</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://www.qmtpro.com/~nes/misc/nestest.txt target=_blank>https://www.qmtpro.com/~nes/misc/nestest.txt</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://bugzmanov.github.io/nes_ebook/chapter_5.html target=_blank>https://bugzmanov.github.io/nes_ebook/chapter_5.html</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p><a href="https://wiki.nesdev.org/w/index.php?title=INES" target=_blank>https://wiki.nesdev.org/w/index.php?title=INES</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><details class="mt-2 mb-5 overflow-hidden rounded-lg ltr:ml-0 ltr:pl-5 rtl:mr-0 rtl:pr-5"><summary class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-primary-800 dark:text-neutral-100">NES Emulation -
이 글은 시리즈의 일부입니다.</summary><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">부분 :
이 글</div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=/projects/nes/cpu-emulation-3/>부분 :
NES CPU(6502) 에뮬레이션 - 3</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=/projects/nes/cpu-emulation-2/>부분 :
NES CPU(6502) 에뮬레이션 - 2</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=/projects/nes/cpu-emulation-1/>부분 :
NES CPU(6502) 에뮬레이션 - 1</a></div><div class="py-1 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><a href=/projects/nes/nesdoc-cpu/>부분 :
Nintendo Entertainment System - CPU</a></div></details><h2 class="mt-8 text-2xl font-extrabold mb-10">관련 글</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><div class="group-hover-card group relative min-h-full min-w-full overflow-hidden rounded border border-2 border-neutral-200 shadow-2xl dark:border-neutral-700 fade-in-up"><a href=/projects/nes/cpu-emulation-3/ class="absolute inset-0" aria-label="NES CPU(6502) 에뮬레이션 - 3"></a><div class="thumbnail_card_related nozoom w-full" style=background-image:url(/projects/nes/cpu-emulation-3/featured.png)></div><div class="px-6 py-4"><div class="group-hover-card-title decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 group-hover:underline group-hover:underline-offset-2">NES CPU(6502) 에뮬레이션 - 3</div><div class="group-hover-cancel text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2022-02-19T02:25:57+09:00>2022-02-19</time><span class="px-2 text-primary-500">&#183;</span><span title="읽는 시간">8 분</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=views_projects/nes/emul/cpu/3/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=views>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentColor" d="M288 32c-80.8.0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7.0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7.0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64-11.5.0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4.0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8.0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span>
</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=likes_projects/nes/emul/cpu/3/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=likes>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span></span></div><div class="flex flex-row flex-wrap items-center"></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] mr-2" href=/tags/project/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Project
</span></span></a><a class="relative mt-[0.5rem] mr-2" href=/tags/development/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Development
</span></span></a><a class="relative mt-[0.5rem] mr-2" href=/tags/software/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Software</span></span></a></div></div><div class="prose dark:prose-invert py-1">이전 포스트에서 레지스터와 메모리 인터페이스를 정의 하였고 이번 포스트에서는 명령어 세트와 어드레싱 모드 구현에 대해 다루어 보고자 합니다.</div></div><div class="px-6 pt-4 pb-2"></div></div><div class="group-hover-card group relative min-h-full min-w-full overflow-hidden rounded border border-2 border-neutral-200 shadow-2xl dark:border-neutral-700 fade-in-up"><a href=/projects/nes/cpu-emulation-2/ class="absolute inset-0" aria-label="NES CPU(6502) 에뮬레이션 - 2"></a><div class="thumbnail_card_related nozoom w-full" style=background-image:url(/Nintendo-Famicom-Console-Set-FL_7663481533029348641.png)></div><div class="px-6 py-4"><div class="group-hover-card-title decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 group-hover:underline group-hover:underline-offset-2">NES CPU(6502) 에뮬레이션 - 2</div><div class="group-hover-cancel text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2022-02-10T23:35:55+09:00>2022-02-10</time><span class="px-2 text-primary-500">&#183;</span><span title="읽는 시간">8 분</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=views_projects/nes/emul/cpu/2/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=views>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentColor" d="M288 32c-80.8.0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7.0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7.0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64-11.5.0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4.0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8.0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span>
</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=likes_projects/nes/emul/cpu/2/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=likes>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span></span></div><div class="flex flex-row flex-wrap items-center"></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] mr-2" href=/tags/project/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Project
</span></span></a><a class="relative mt-[0.5rem] mr-2" href=/tags/development/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Development
</span></span></a><a class="relative mt-[0.5rem] mr-2" href=/tags/software/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Software</span></span></a></div></div><div class="prose dark:prose-invert py-1">이전 포스트에서 6502 프로세서의 간략한 특징과 명령어, 어드레싱 모드에 대해서 정리를 했습니다. 에뮬레이션을 위해서는 더 많은 내용의 정리가 필요하지만 이미 레퍼런스 자료가 많이 있으므로 상세한 정보는 생략하고 일부 코드 예제를 들어 어떻게 구현할 것인지에 대한 고찰과 짤막한 코드와 함께 구현하는 과정을 남겨 보겠습니다.</div></div><div class="px-6 pt-4 pb-2"></div></div><div class="group-hover-card group relative min-h-full min-w-full overflow-hidden rounded border border-2 border-neutral-200 shadow-2xl dark:border-neutral-700 fade-in-up"><a href=/projects/nes/cpu-emulation-1/ class="absolute inset-0" aria-label="NES CPU(6502) 에뮬레이션 - 1"></a><div class="thumbnail_card_related nozoom w-full" style=background-image:url(/NES-Console-Set_9023868207455619193.png)></div><div class="px-6 py-4"><div class="group-hover-card-title decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 group-hover:underline group-hover:underline-offset-2">NES CPU(6502) 에뮬레이션 - 1</div><div class="group-hover-cancel text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2022-02-07T18:07:00+09:00>2022-02-07</time><span class="px-2 text-primary-500">&#183;</span><span title="읽는 시간">14 분</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=views_projects/nes/emul/cpu/1/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=views>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentColor" d="M288 32c-80.8.0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7.0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7.0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64-11.5.0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4.0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8.0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></span>
</span><span class="px-2 text-primary-500">&#183;</span><span>
<span id=likes_projects/nes/emul/cpu/1/index.md class="animate-pulse inline-block text-transparent max-h-3 rounded-full -mt-[2px] align-middle bg-neutral-300 dark:bg-neutral-400" title=likes>loading</span>
<span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg></span></span></span></div><div class="flex flex-row flex-wrap items-center"></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] mr-2" href=/tags/project/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Project
</span></span></a><a class="relative mt-[0.5rem] mr-2" href=/tags/development/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Development
</span></span></a><a class="relative mt-[0.5rem] mr-2" href=/tags/software/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Software</span></span></a></div></div><div class="prose dark:prose-invert py-1">NES 에뮬레이션을 위해서 C# 환경에서 6502 CPU를 구현 하면서 참조한 지식과 경험을 정리합니다. 이전의 NESDOC1 포스트 내용이 상당수 그대로 반영이 되어있습니다.</div></div><div class="px-6 pt-4 pb-2"></div></div></section></div><script type=text/javascript src=/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA==" data-oid=views_projects/nes/emul/cpu/4/index.md data-oid-likes=likes_projects/nes/emul/cpu/4/index.md></script></section><footer class="pt-8 print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/projects/nes/cpu-emulation-3/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">NES CPU(6502) 에뮬레이션 - 3</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2022-02-19T02:25:57+09:00>2022-02-19</time>
</span></span></a></span><span></span></div></div><div class=pt-3><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class=pt-3><script src=https://utteranc.es/client.js repo=micro-artwork/micro-artwork.github.io issue-term=pathname theme=preferred-color-scheme crossorigin=anonymous async></script></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0 z-10"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="맨 위로 스크롤" title="맨 위로 스크롤">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2025
Yogo</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://opensourcehardware.io/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=검색 tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="닫기 (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>